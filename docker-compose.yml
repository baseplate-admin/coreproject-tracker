services:
    redis:
        image: redis:7.4.2-alpine
        container_name: coreproject-tracker-redis
        networks:
            - tracker_network

        restart: always
        expose:
            - '6379' # Expose to other services in the network but not to localhost


    tracker:
        build:
            context: .
            dockerfile: Dockerfile
        container_name: coreproject-tracker

        networks:
            - tracker_network
        restart: always
        environment:
            # Example environment variables
            REDIS_HOST: redis
            REDIS_PORT: 6379
            
        ports:
            - '8001:8001'
            - '8001:8001/udp' # UDP

            - '9000:9000' # HTTP
            - '12000:8080' # Websocket

networks:
    tracker_network:
        driver: 'bridge'
        enable_ipv6: true